中国矿业大学云课堂平台专用爬虫，用于下载云课堂上的课程视频。

至于为什么开发这个爬虫，因为我不喜欢云课堂的在线播放器体验。

在使用前先确保你的python已经安装Crypto库，否则请把references.txt文件中的内容放入cmd下运行。
然后在passwd.py文件中写入云课堂的账号以及密码，再在main.py中修改你需下载的课程名称以及保存位置，最后运行即可。

# 技术细节

本爬虫经过模拟浏览器操作，提交统一身份认证，然后再通过云课堂的网络函数来获取所需要的信息，最后再把视频下载下来。

在提交统一身份认证的账户密码前，需要对用户密码进行AES CBC加密，padding方式采用pkcs7，加密密钥由登录页html中的 id为“pwdEncryptSalt”的input框的value字段给出。

登录成功后会重定向跳转两次，其中第二次跳转的url中有获取userId所需的ticket字段，需要保存下来。userId是获取所有课程的信息时必要的信息。

云课堂应用里的各种信息是通过向某个链接发送GET请求返回的，而不是全部写在html页面中。每一次请求信息的url后面都要跟一个"validCode"参数，这个参数在请求非隐私信息时是"md5(“id=”+videoDetailId+"&signKey=123123") （&signKey=123123"这个字符串的md5结果的16进制表示）；获取单个视频的详细信息时是md5(“id=”+videoDetailId+"&signKey=123123")；获取用户的个人信息时是md5(“id=”+userId+"&signKey=123123")
